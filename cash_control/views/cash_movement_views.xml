<odoo>
  <record id="view_cash_movement_form" model="ir.ui.view">
    <field name="name">cash.movement.form</field>
    <field name="model">cash.control.movement</field>
    <field name="arch" type="xml">
      <form string="Movimiento de Caja">
        <!-- Barra de estado -->
        <header>
          <field name="rendicion_state"
                 widget="statusbar"
                 statusbar_visible="no_aplica,sin_rendir,parcial,rendido"
                 statusbar_status="rendido"/>
        </header>
        <sheet>
          <div class="oe_title">
                    <h1>
                        Balance: <field name="box_balance" readonly="1" string="Balance de caja"/>
                    </h1>
                </div>
          <group>
            <!-- Columna Izquierda: Informaci贸n Principal -->
            <group>            
              <field name="name" readonly="1" string="Secuencia"/>
              <field name="box_id" string="Caja"/>
              <!--<field name="box_balance" readonly="1" string="Balance de caja"/>-->
              <field name="date" string="Fecha y hora"/>
              <field name="type" string="Tipo"/>
              <field name="amount" string="Monto (+)"/>
              <field name="signed_amount" invisible="1"/>
              <field name="responsible_id" string="Responsable"/>
              <field name="notes" string="Notas"/>
              <!-- Campo oculto requerido para condiciones -->
              <field name="is_transferencia_banco" invisible="1"/>
            </group>
            <!-- Columna Derecha: Informaci贸n Adicional -->
            <group>
              <group invisible="type != 'egreso'">
                <field name="por_rendir" string="Por Rendir"/>
                <field name="monto_rendido" string="Monto rendido" invisible="not por_rendir"/>
                <field name="fecha_rendicion" string="Fecha de rendici贸n" invisible="not por_rendir"/>
              </group>
              <group invisible="not is_transferencia_banco">
                <field name="target_bank_id" string="Banco Destino" placeholder="Seleccione el Banco Destino"/>
              </group>              
            </group>
          </group>
        </sheet>
        <!-- Chatter -->
        <div class="oe_chatter">
          <field name="message_ids" widget="mail_thread"
                 options="{'res_field': 'message_ids', 'post_refresh': 'frontend'}"/>
          <field name="message_follower_ids" widget="mail_followers"/>
        </div>
      </form>
    </field>
  </record>

  <record id="view_cash_movement_tree" model="ir.ui.view">
    <field name="name">cash.movement.tree</field>
    <field name="model">cash.control.movement</field>
    <field name="arch" type="xml">
      <tree decoration-danger="rendicion_state == 'sin_rendir'"
            decoration-warning="rendicion_state == 'parcial'"
            decoration-success="rendicion_state == 'rendido'">
        <field name="name" string="Secuencia"/>
        <field name="box_id" string="Caja"/>
        <field name="date" string="Fecha y hora"/>
        <field name="responsible_id" string="Responsable"/>
        <field name="type" string="Tipo"/>
        <field name="signed_amount" sum="Total" string="Monto"/>
        <field name="rendicion_state" string="Estado de rendici贸n"/>
      </tree>
    </field>
  </record>
</odoo>
